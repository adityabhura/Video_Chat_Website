<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    THIS WILL BE THE REGISTRATION PAGE 
    <form action="/signup" method="POST">
        <input type="email" name="username" placeholder="Email" required id="username">
        <input type="text" name="handlename" placeholder="Handle Name" required id="handlename" minlength="5">
        <input type="text" name="name" placeholder="Name" required minlength="4">
        <input type="date" name="dateofbirth" placeholder="Date of Birth" required>
        <input type="password" name="password" placeholder="password" required>
        <button type="reset">Reset</button>
        <button type="submit" id="submit-button">Submit</button>
    </form> 
    
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket=io();
        var submitButton=document.getElementById('submit-button');
        var errorDiv=document.createElement('div');
        var usernameInput=document.getElementById('username');
       
        usernameInput.onkeyup = function(){
           var username=usernameInput.value
            socket.emit('checkUsername',{username})
        }
        
        socket.on('alertForUsername',function(data){
           if(data.present){    
               errorDiv.innerHTML="Username Already Exsists"
               document.querySelector('body').append(errorDiv);
               submitButton.disabled=true;
           }
           if(!data.present){
               console.log("a");
            errorDiv.remove();
            errorDiv.innerHTML=""
            if(errorDiv1.innerHTML){
                    submitButton.disabled=true;
                }else{
                    submitButton.disabled=false;
                }
           }
        })

        
        var handlenameInput=document.getElementById('handlename');
        var errorDiv1=document.createElement('div');
        handlenameInput.onkeyup = function(){
           var handlename=handlenameInput.value
            socket.emit('checkHandlename',{handlename})
        }
        
        socket.on('alertForHandlename',function(data){
           if(data.present){    
               errorDiv1.innerHTML="Handle Name Already Exsists"
               document.querySelector('body').append(errorDiv1);
               submitButton.disabled=true;
           }
           if(!data.present){
               console.log("a");
                errorDiv1.remove();
                errorDiv1.innerHTML=""
                if(errorDiv.innerHTML){
                    submitButton.disabled=true;
                }else{
                    submitButton.disabled=false;
                }
                
           }
        })
    </script>
</body>
</html>

